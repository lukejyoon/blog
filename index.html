<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Site</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
<style>
:root{--bg:#f2f4f7;--fg:#111;--muted:#6b7280;--panel:#fff;--rule:#e5e7eb}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.6 Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
.app{min-height:100vh;display:flex;padding:24px}
.panel{
  width:clamp(260px,40vw,420px);background:var(--panel);border:1px solid var(--rule);
  border-radius:14px;box-shadow:0 2px 8px rgba(0,0,0,.04);padding:20px;overflow:auto
}
.main{flex:1;padding-left:24px;display:flex}
.view{flex:1;background:transparent}
h1{font-size:1.5rem;margin:0 0 .25rem}
p{margin:.25rem 0 1rem;color:var(--muted)}
ul{list-style:none;margin:0;padding:0}
li{padding:.6rem 0}
a,a:visited{color:inherit;text-decoration:none;position:relative}
a::after{content:"";position:absolute;left:0;right:0;height:2px;background:currentColor;opacity:0;bottom:-8px;transform:scaleX(.9);transition:opacity .2s,transform .2s}
a:hover::after{opacity:1;transform:scaleX(1)}
.nav a.active{font-weight:700}
</style>
</head>
<body>
  <div class="app">
    <aside class="panel">
      <h1>Yoonhwan Jeong</h1>
      <p>welcome hehe</p>
      <ul class="nav">
        <li><a href="/now" data-route>Now</a></li>
        <li><a href="/projects" data-route>Projects</a></li>
        <li><a href="/logs" data-route>Logs</a></li>
      </ul>
    </aside>

    <section class="main">
      <div id="view" class="view" aria-live="polite"></div>
    </section>
  </div>

<script>
const routes = {
  "/":         "/pages/home.html",
  "/now":      "/pages/now.html",
  "/projects": "/pages/projects.html",
  "/logs":     "/pages/logs.html",
};

function setActive(path){
  document.querySelectorAll('[data-route]').forEach(a=>{
    a.classList.toggle('active', a.getAttribute('href')===path);
  });
}

async function render(path){
  const url = routes[path] || routes["/"];
  const view = document.getElementById('view');
  try{
    const res = await fetch(url, {cache:"no-cache"});
    view.innerHTML = await res.text();
  }catch{
    view.innerHTML = "<p>Failed to load.</p>";
  }
  setActive(path);
}

function navigate(path){
  history.pushState({path}, "", path);
  render(path);
}

document.addEventListener("click",(e)=>{
  const a = e.target.closest('a[data-route]');
  if(!a) return;
  e.preventDefault();
  navigate(a.getAttribute("href"));
});

window.addEventListener("popstate",()=>render(location.pathname));

const initial = (location.pathname.replace(/\/$/,"") || "/");
render(initial);
</script>
</body>
</html>
